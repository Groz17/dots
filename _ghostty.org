#+property: header-args :tangle ~/.config/ghostty/config
#+startup: content

# Run `ghostty +show-config --default --docs` to view a list of
# all available config options and their default values.
# Additionally, each config option is also explained in detail
# on Ghostty's website, at https://ghostty.org/docs/config.

* TODO TASK LIST
- [ ] split docker container pane same cwd?
- [ ] window-save-state?
- [ ] resize?

* Prefs
#+begin_src conf :noweb yes
# font-family = Iosevka
font-family = Aporetic Sans Mono
# font-family = Adwaita Mono
# font-family = Maple Mono
# toggle with keybinding?
# font-feature= -calt, -liga, -dlig
window-padding-x = 0
window-padding-y = 0
# theme=Kanagawa Dragon
# theme = dark:catppuccin-frappe,light:catppuccin-latte
# https://usgraphics.com/products/berkeley-mono
# theme=purplepeter
# theme=vesper
# theme=Belafonte Night
# theme=Sugarplum
# theme=Dracula+
# transition? ef-themes?
# theme=light:Rose Pine Dawn,dark:Rose Pine
# https://github.com/anhsirk0/ghostty-themes
theme = light:<<theme(color_scheme="light")>>,dark:<<theme(color_scheme="dark")>>

 # TODO: finche non fixo deferred-clipboard in emacs
clipboard-read=allow
clipboard-write=allow
# copy-on-select=clipboard
app-notifications=no-clipboard-copy

confirm-close-surface=true

# # Empty values are used to reset config keys to default.
# key =
# resize-overlay-duration = 4s 200ms

window-padding-balance=true
background-opacity=0.93
# background-opacity=1
cursor-style=block
shell-integration-features=no-cursor,sudo,no-title
adjust-cell-height=3%
# adjust-cell-height=35%
mouse-hide-while-typing=true
window-save-state=always
window-decoration=none
#+end_src

Dirty hack
#+begin_src python :var font-size=(if (string-match  "Power N/A, battery unknown (N/A% load, remaining time N/A)"(battery)) 13 11)
#+end_src

#+begin_src conf
# TODO: non funge con ssh/neovim/emacs cwd
window-inherit-working-directory=true
# split-divider-color=yellow
#+end_src

* Keybinds 
Command palette prefix+x?
#+begin_src conf
keybind=clear


# basically leader mimics ctrl...
# I want to have a leader based control system for ghostty (to avoid key collissions with other applications), where <C-s> is used as my leader key for operations
# while the meta/alt key is used for movement within the multiplexed terminals
#+end_src

** General
#+begin_src conf
# same mapping as neovim's :restart?
keybind=super+alt+r=reload_config
keybind = super+alt+a=select_all
keybind = ctrl+shift+c=copy_to_clipboard
keybind = ctrl+shift+v=paste_from_clipboard
# like emacs' <c-x>0
# keybind = super+alt+digit_0=close_surface
keybind = super+alt+q=close_surface
keybind = super+alt+slash=undo
# Currently not working
keybind = super+alt+shift+i=inspector:toggle

keybind = super+alt+x=toggle_command_palette

# probably kanata
# keybind = super+alt+kp_add=increase_font_size:1
keybind = super+alt+equal=increase_font_size:1
# keybind = super+alt++=increase_font_size:1
keybind = super+alt+-=decrease_font_size:1
# like emacs' <c-x>+
keybind = super+alt+shift+equal=reset_font_size

# https://www.reddit.com/r/Ghostty/comments/1hy4out/ghostty_config_with_leader_based_bindings/?rdt=56822

# # Window stuff (isn't this basically hyprland job?) metto qua i keybindings o in hyprland o in nixos?
# actually the difference is that you can use these mappings only from ghostty, so just put them in hyprland/kanata/nix
# keybind = global:super+alt+q>n=new_window --doesn't work On linux
keybind = super+alt+d=toggle_window_decorations
# keybind = super+alt+w>f=toggle_fullscreen
# Note This requires you to have the right editor set via xdg. 
# This can be done with `xdg-mime default nvim.desktop text/plain`
keybind = super+alt+w=write_scrollback_file:open
keybind = super+alt+shift+w=write_screen_file:open

# Scroll
# use C-v and A-v like emacs? do these work just shell?
# keybind = ctrl+v=scroll_page_fractional:0.5
# keybind = alt+v=scroll_page_fractional:-0.5
keybind = super+alt+d=scroll_page_fractional:0.5
keybind = super+alt+u=scroll_page_fractional:-0.5
keybind = super+alt+shift+,=scroll_to_top
keybind = super+alt+shift+.=scroll_to_bottom

# keybind = global:super+alt+grave_accent=toggle_quick_terminal
keybind = super+alt+comma=open_config
# # -= Navigation 
#+end_src

** Splits
#+begin_src conf
# keybind=homehift+alt+v=new_split:right
##keybind=homehift+alt+v=new_split:right
# keybind=cmd+v=new_split:right
# magari fai keybindings simili per hyprland?
# keybind=super+alt+v=new_split:right
# use s/l (like ctrl-x) and 0,1,2,3,... like emacs (tanto userai sempre e solo emacs GUI)
# maybe a/; so u can use ash to select all?
keybind=super+alt+v=new_split:right
keybind=super+alt+shift+v=new_split:left
keybind=super+alt+s=new_split:down
keybind=super+alt+shift+s=new_split:up
#
# keybind = super+alt+equal=equalize_splits
keybind = super+alt+e=equalize_splits
# resize mode? do these actions support something like v:count?
keybind = super+alt+,=resize_split:left,10
keybind = super+alt+.=resize_split:right,10
# keybind = alt>6=resize_split:up,10
# keybind = alt>7=resize_split:down,10

# # Split navigation
keybind = super+alt+h=goto_split:left
keybind = super+alt+j=goto_split:bottom
keybind = super+alt+k=goto_split:top
keybind = super+alt+l=goto_split:right
#+end_src

** Tabs
#+begin_src conf

keybind = super+alt+t=new_tab
# turn split to tab? like ^wT in vim
keybind = super+alt+f=toggle_split_zoom

keybind = super+alt+o=next_tab
keybind = super+alt+shift+o=previous_tab
# like <c-x>t{o,O}
# keybind = super+alt+0=goto_tab:1
# keybind = super+alt+^=goto_tab:1
# goto last tab action? w/ $ or smth
keybind = super+alt+m=move_tab:+1
# keybind = super+alt+->m=move_tab:-1 (need to use zoom)

# # Prompt navigation
# like ctrl-p/n 
# keybind = super+alt+b=jump_to_prompt:-1
# keybind = super+alt+f=jump_to_prompt:1
# keybind = super+alt+p=jump_to_prompt:-1
# keybind = super+alt+n=jump_to_prompt:1


# Elsewhere, Ghostty intros a new performable: keybinding prefix to control if a configured keyboard shortcut “should only consume the input if the action is performed”, as per this given example:
# keybind = performable:ctrl+c=copy_to_clipboard
# In this setup, Ghostty only “consumes” — responds to the keyboard shortcut — if there’s selected text to be copied. If not, the shortcut is passed on to the shell (which the app devs note usually triggers an interrupt signal).
#
# ghostty mapping to Move window to its own tab?
#
# keybind=alt+n=unbind
# keybind=alt+p=unbind
#
# set terminal cursor color #00ffa0
# search scrollback with leader+/
#+end_src

* Commands 
#+begin_src conf
#+end_src

* Shaders 
https://github.com/KroneCorylus/ghostty-shader-playground

Shader picker w/ preview
#+begin_src conf

# how to reload those?
# how to use env vars here/special ghostty config dir var?
# custom-shader = ./shaders/galaxy.glsl
# custom-shader = ./shaders/drunkard.glsl
# custom-shader = ./shaders/bloom.glsl
# custom-shader = ./shaders/water.glsl
# custom-shader = ./shaders/glitchy.glsl

# custom-shader = ./shaders/cursor_blaze.glsl
#+end_src
